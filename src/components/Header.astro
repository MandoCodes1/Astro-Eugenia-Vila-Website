---
import LanguageToggle from './LanguageToggle.astro';

interface Props {
  lang: 'es' | 'en';
  currentPath: string;
}

const { lang, currentPath } = Astro.props;

const navItems = {
  es: [
    { href: '/es/', label: 'Inicio' },
    { href: '/es/sobre-mi/', label: 'Sobre MÃ­' },
    { href: '/es/servicios/', label: 'Servicios' },
    { href: '/es/casos/', label: 'Casos' },
    { href: '/es/opiniones/', label: 'Opiniones' },
    { href: '/es/contacto/', label: 'Contacto' },
  ],
  en: [
    { href: '/en/', label: 'Home' },
    { href: '/en/about/', label: 'About' },
    { href: '/en/services/', label: 'Services' },
    { href: '/en/cases/', label: 'Cases' },
    { href: '/en/reviews/', label: 'Reviews' },
    { href: '/en/contact/', label: 'Contact' },
  ],
};

const items = navItems[lang];
const isActive = (href: string) => currentPath === href || currentPath.startsWith(href);
---

<header class="sticky top-0 z-50 bg-white shadow-md">
  <nav class="container mx-auto px-4 py-4">
    <div class="flex items-center justify-between">
      <!-- Logo -->
      <a href={lang === 'es' ? '/es/' : '/en/'} class="flex items-center space-x-2">
        <span class="text-2xl font-bold" style="color: var(--color-primary);">
          {lang === 'es' ? 'Dra. Eugenia Vila' : 'Dr. Eugenia Vila'}
        </span>
      </a>

      <!-- Desktop Navigation -->
      <div class="hidden md:flex items-center space-x-6">
        {items.map((item) => (
          <a
            href={item.href}
            class={`font-medium transition-colors hover:text-[var(--color-primary)] ${
              isActive(item.href) ? 'text-[var(--color-primary)]' : 'text-gray-700'
            }`}
          >
            {item.label}
          </a>
        ))}
        <LanguageToggle lang={lang} currentPath={currentPath} />
        <a
          href="https://wa.me/34679975580"
          class="px-4 py-2 rounded-lg font-medium text-white transition-colors"
          style="background-color: var(--color-primary); hover:background-color: var(--color-dark);"
        >
          {lang === 'es' ? 'Reservar Cita' : 'Book Appointment'}
        </a>
      </div>

      <!-- Mobile Menu Button -->
      <button
        id="mobile-menu-button"
        class="md:hidden p-2"
        aria-label="Toggle menu"
      >
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </div>

    <!-- Mobile Navigation -->
    <div id="mobile-menu" class="hidden md:hidden mt-4 pb-4 space-y-3">
      {items.map((item) => (
        <a
          href={item.href}
          class={`block py-2 font-medium transition-colors ${
            isActive(item.href) ? 'text-[var(--color-primary)]' : 'text-gray-700'
          }`}
        >
          {item.label}
        </a>
      ))}
      <div class="pt-2">
        <LanguageToggle lang={lang} currentPath={currentPath} />
      </div>
      <a
        href="https://wa.me/34679975580"
        class="block text-center px-4 py-2 rounded-lg font-medium text-white"
        style="background-color: var(--color-primary);"
      >
        {lang === 'es' ? 'Reservar Cita' : 'Book Appointment'}
      </a>
    </div>
  </nav>
</header>

<script>
  // Mobile menu toggle
  const button = document.getElementById('mobile-menu-button');
  const menu = document.getElementById('mobile-menu');
  
  button?.addEventListener('click', () => {
    menu?.classList.toggle('hidden');
  });
</script>

